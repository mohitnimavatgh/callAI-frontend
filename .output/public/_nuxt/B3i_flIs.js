import{_ as K}from"./DX7fHSrm.js";import{_ as L}from"./0YgGQvqb.js";import{_ as j}from"./r7gvbwgk.js";import{J as P,K as W,n as J,B as O,r as x,h as R,o as g,c as b,a as n,b as c,u as o,F as Y,E as z,d as G,t as H,I as Q,x as X}from"./-26k3Kfm.js";import{A as Z}from"./DYk6i2Lg.js";import{i as ee}from"./Bp9WpJq9.js";import{u as te}from"./Dq2eM7QD.js";import{c as $,r as A,d as N,e as oe,u as ae}from"./Dw3NAe37.js";const le=P("bots",{state:()=>({}),actions:{async create(w){try{return(await Z(w)).data}catch(d){throw d}}},persist:{storage:W.localStorage}}),se={class:"mt-5"},ne=n("div",null,[n("h4",{class:"text-lg font-semibold text-gray-600 dark:text-white"},"Bot Configuration"),n("p",{class:"text-xs font-normal text-gray-500 mt-0.5"},"Change your meeting bot settings")],-1),ie={class:"p-5 mt-3 lg:w-1/2 w-full bg-white dark:bg-gray-800 rounded-lg"},re={key:0},ue={class:"mt-2 dark:text-white text-ref-500 w-fit"},me={class:"text-lg font-medium flex items-center px-2.5 py-0.5 rounded text-black-500 bg-gray-100 dark:bg-gray-900 dark:text-gray-300`"},ce=["onClick"],de={class:"mt-4 flex justify-end"},xe=J({__name:"index",setup(w){const d=le(),p=te(),{$toast:r}=X();O(()=>{ee()});var v="action";const l=x({bot_name:null,after_complete_run_actions:"",action:null,transcription_tool:null,recording_type:null,multiple_emails:null}),i=x([]),S={bot:{bot_name:{required:$.withMessage("The Bot Name field is required",A)},after_complete_run_actions:{required:$.withMessage("The Meeting Action field is required",A)},action:{required:N(function(e){return l.value.after_complete_run_actions==v})},multiple_emails:{required:N(function(e){if(l.value.after_complete_run_actions==v&&i.value.length==0)return!0}),email:$.withMessage("Please Enter a valid Email Address",oe)},transcription_tool:{},recording_type:{}}},a=ae(S,{bot:l}),C=x([{id:"nothing",name:"Nothing"},{id:"action",name:"Send Email"}]),M=async()=>{await a.value.$validate()&&(p.loading=!0,l.value.after_complete_run_actions=="Send Email"&&(l.value.multiple_emails=i.value),d.create(l.value).then(t=>{p.loading=!1,D(),r.success("Bot create Successfully",{duration:5e3})}).catch(t=>{p.loading=!1,F(t)}))},F=e=>{var t,u,_,f,s,m,h,k,B,E,q;if(((t=e==null?void 0:e.response)==null?void 0:t.status)==422){let y=(_=(u=e==null?void 0:e.response)==null?void 0:u.data)==null?void 0:_.data;if(y){let U=Object.keys(y)[0],I=y[U];r.error(I[0],{duration:5e3})}else(s=(f=e==null?void 0:e.response)==null?void 0:f.data)!=null&&s.success?r.error("something went wrong...!",{duration:5e3}):r.error((h=(m=e==null?void 0:e.response)==null?void 0:m.data)==null?void 0:h.message,{duration:5e3})}else(B=(k=e==null?void 0:e.response)==null?void 0:k.data)!=null&&B.success?r.error("something went wrong...!",{duration:5e3}):r.error((q=(E=e==null?void 0:e.response)==null?void 0:E.data)==null?void 0:q.message,{duration:5e3})},D=()=>{l.value={bot_name:null,after_complete_run_actions:null,action:null,transcription_tool:null,recording_type:null,multiple_emails:null},a.value.$reset()},V=e=>{e.key==="Enter"&&(e.preventDefault(),l.value.multiple_emails.length>0&&l.value.multiple_emails.trim().length>0&&(i.value.includes(l.value.multiple_emails.trim())||i.value.push(l.value.multiple_emails.trim()),l.value.multiple_emails=null))};R(()=>l.value.after_complete_run_actions,e=>{e=="nothing"&&(i.value=[],a.value.$reset())});const T=e=>{i.value.splice(e,1)};return(e,t)=>{const u=K,_=L,f=j;return g(),b("div",se,[ne,n("div",ie,[c(u,{id:"Bot Name",class:"mt-4",label:"Bot Name",name:"Bot Name",type:"text",placeholder:"Enter Bot Name",rules:"required",modelValue:o(a).bot.bot_name.$model,"onUpdate:modelValue":t[0]||(t[0]=s=>o(a).bot.bot_name.$model=s),errors:o(a).bot.bot_name.$errors},null,8,["modelValue","errors"]),c(_,{class:"mt-4",label:"Action After Meeting Complete",id:"action",name:"action",placeholder:"Select Action",modelValue:o(a).bot.after_complete_run_actions.$model,"onUpdate:modelValue":t[1]||(t[1]=s=>o(a).bot.after_complete_run_actions.$model=s),errors:o(a).bot.after_complete_run_actions.$errors,options:o(C),rules:"required"},null,8,["modelValue","errors","options"]),o(l).after_complete_run_actions==o(v)?(g(),b("div",re,[c(u,{id:"Action",class:"mt-4",label:"What Action You Want To Perform",name:"Action",type:"text",placeholder:"Enter Action",rules:"required",modelValue:o(a).bot.action.$model,"onUpdate:modelValue":t[2]||(t[2]=s=>o(a).bot.action.$model=s),errors:o(a).bot.action.$errors},null,8,["modelValue","errors"]),c(u,{id:"Email",class:"mt-4",label:"Enter Email",name:"Email",type:"text",placeholder:"Enter Email",rules:"required|email",modelValue:o(a).bot.multiple_emails.$model,"onUpdate:modelValue":t[3]||(t[3]=s=>o(a).bot.multiple_emails.$model=s),errors:o(a).bot.multiple_emails.$errors,onKeydown:V,onBlur:V},null,8,["modelValue","errors"]),n("ul",null,[(g(!0),b(Y,null,z(o(i),(s,m)=>(g(),b("li",{key:m},[n("p",ue,[n("span",me,[G(H(s)+" ",1),n("i",{class:"text-sm text-black-400 fas fa-close ml-1",onClick:h=>T(m)},null,8,ce)])])]))),128))])])):Q("",!0),n("div",de,[c(f,{text:"Save",class:"m-0",onClick:t[4]||(t[4]=s=>M())})])])])}}});export{xe as default};
