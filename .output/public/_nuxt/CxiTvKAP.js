import{_ as E}from"./DX7fHSrm.js";import{_ as M}from"./r7gvbwgk.js";import{n as R,s as S,r as $,v as U,o as I,c as j,a as l,b as i,u as s,x as F}from"./-26k3Kfm.js";import{a as O}from"./D-d9pQah.js";import{c as m,r as f,s as z,u as G}from"./Dw3NAe37.js";import"./DYk6i2Lg.js";const H={class:"w-full h-full pb-8 overflow-y-auto dark:text-gray-300"},J=l("div",{class:"text-gray-700 text-3xl"}," Change Password ",-1),K={class:"mt-6 w-4/12 py-2"},L={class:""},Q={class:"mt-5"},W={class:"mt-5"},te=R({__name:"change-password",setup(X){const p=O(),x=S(),{$toast:d}=F(),c=$({currentPassword:"",newPassword:"",confirmNewPassword:""}),N={formData:{currentPassword:{required:m.withMessage("The Current Password is required",f)},newPassword:{required:m.withMessage("The New Password is required",f)},confirmNewPassword:{required:m.withMessage("The Confirm Password is required",f),sameAs:m.withMessage("The Confirm Password must be same as New Password",z(U(()=>c.value.newPassword)))}}},a=G(N,{formData:c}),V=async()=>{if(await a.value.$validate()){let t={currentpassword:c.value.currentPassword,newpassword:c.value.newPassword};p.changePassword(t).then(r=>{T(),d.success("Password changed successfully",{duration:5e3})}).catch(r=>{h(r)})}},T=()=>{c.value={currentPassword:"",newPassword:"",confirmNewPassword:""},a.value.$reset(),p.logout().then(e=>{x.push("/admin/login")}).catch(e=>{h(e)})},h=e=>{var t,r,u,n,P,y,g,_,v,C,D;if(((t=e==null?void 0:e.response)==null?void 0:t.status)==422){let w=(u=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:u.data;if(w){let A=Object.keys(w)[0],B=w[A];d.error(B[0],{duration:5e3})}else(P=(n=e==null?void 0:e.response)==null?void 0:n.data)!=null&&P.success?d.error("Something went wrong...!",{duration:5e3}):d.error((g=(y=e==null?void 0:e.response)==null?void 0:y.data)==null?void 0:g.message,{duration:5e3})}else(v=(_=e==null?void 0:e.response)==null?void 0:_.data)!=null&&v.success?d.error("Something went wrong...!",{duration:5e3}):d.error((D=(C=e==null?void 0:e.response)==null?void 0:C.data)==null?void 0:D.message,{duration:5e3})},o=$({current:!0,new:!0,confirm:!0}),b=()=>{o.value.current=!o.value.current},q=()=>{o.value.new=!o.value.new},k=()=>{o.value.confirm=!o.value.confirm};return(e,t)=>{const r=E,u=M;return I(),j("div",H,[J,l("div",K,[l("div",L,[i(r,{id:"current",label:"Current Password",iconPosition:"right",name:"current",type:s(o).current?"password":"text",pointer:!1,placeholder:"Enter your current password",icon:s(o).current?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.currentPassword.$model,"onUpdate:modelValue":t[0]||(t[0]=n=>s(a).formData.currentPassword.$model=n),errors:s(a).formData.currentPassword.$errors,onChangeType:b},null,8,["type","icon","modelValue","errors"])]),l("div",Q,[i(r,{id:"new",label:"New Password",name:"new",iconPosition:"right",type:s(o).new?"password":"text",pointer:!1,placeholder:"Enter your current password",icon:s(o).new?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.newPassword.$model,"onUpdate:modelValue":t[1]||(t[1]=n=>s(a).formData.newPassword.$model=n),errors:s(a).formData.newPassword.$errors,onChangeType:q},null,8,["type","icon","modelValue","errors"])]),l("div",W,[i(r,{id:"confirm",label:"Confirm Password",name:"confirm",iconPosition:"right",type:s(o).confirm?"password":"text",pointer:!1,placeholder:"Enter your current password",icon:s(o).confirm?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.confirmNewPassword.$model,"onUpdate:modelValue":t[2]||(t[2]=n=>s(a).formData.confirmNewPassword.$model=n),errors:s(a).formData.confirmNewPassword.$errors,onChangeType:k},null,8,["type","icon","modelValue","errors"])]),i(u,{class:"mt-6",text:"Submit",frontIcon:"",onClick:V})])])}}});export{te as default};
