import{_ as E}from"./DMpLc2Hb.js";import{_ as P}from"./DX7fHSrm.js";import{_ as T}from"./r7gvbwgk.js";import{n as j,s as A,r as C,o as L,c as F,b as u,a as n,u as s,x as O}from"./-26k3Kfm.js";import{u as z}from"./Dkzkeb-w.js";import{u as G}from"./Dq2eM7QD.js";import{c as I,r as k,u as H}from"./Dw3NAe37.js";import"./DYk6i2Lg.js";const J={class:"mt-5"},K=n("div",null,[n("h4",{class:"text-lg font-semibold text-gray-600 dark:text-white"},"Profile")],-1),Q={class:"p-5 mt-3 lg:w-1/2 w-full bg-white dark:bg-gray-800 rounded-lg"},W={class:""},X={class:"mt-5"},Y={class:"mt-5"},Z={class:"mt-5"},S={class:"mt-5"},ee={class:"mt-4 flex justify-end"},ue=j({__name:"profile",setup(oe){var _,b,y,V,g,v;const c=G(),o=z();A();const{$toast:r}=O(),t=C({id:(_=o==null?void 0:o.userInfo)==null?void 0:_.id,name:(b=o==null?void 0:o.userInfo)==null?void 0:b.name,mobile_no:(y=o==null?void 0:o.userInfo)==null?void 0:y.mobile_no,email:(V=o==null?void 0:o.userInfo)==null?void 0:V.email,role:(g=o==null?void 0:o.userInfo)==null?void 0:g.role_name,type:(v=o==null?void 0:o.userInfo)==null?void 0:v.type}),U={formData:{name:{required:I.withMessage("The Name is required",k)},mobile_no:{required:I.withMessage("The Mobile No is required",k)}}},i=H(U,{formData:t}),M=async()=>{if(await i.value.$validate()){c.loading=!0;let l={id:t.value.id,name:t.value.name,email:t.value.email,mobile_no:t.value.mobile_no};o.updateProfile(l).then(d=>{c.loading=!1,r.success("Updated Profile successfully",{duration:5e3})}).catch(d=>{c.loading=!1,q(d)})}},q=e=>{var l,d,m,p,a,h,x,$,w,N,D;if(((l=e==null?void 0:e.response)==null?void 0:l.status)==422){let f=(m=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:m.data;if(f){let R=Object.keys(f)[0],B=f[R];r.error(B[0],{duration:5e3})}else(a=(p=e==null?void 0:e.response)==null?void 0:p.data)!=null&&a.success?r.error("Something went wrong...!",{duration:5e3}):r.error((x=(h=e==null?void 0:e.response)==null?void 0:h.data)==null?void 0:x.message,{duration:5e3})}else(w=($=e==null?void 0:e.response)==null?void 0:$.data)!=null&&w.success?r.error("Something went wrong...!",{duration:5e3}):r.error((D=(N=e==null?void 0:e.response)==null?void 0:N.data)==null?void 0:D.message,{duration:5e3})};return(e,l)=>{const d=E,m=P,p=T;return L(),F("div",J,[u(d),K,n("div",Q,[n("div",W,[u(m,{id:"name",class:"mt-3",modelValue:s(i).formData.name.$model,"onUpdate:modelValue":l[0]||(l[0]=a=>s(i).formData.name.$model=a),errors:s(i).formData.name.$errors,label:"Name",name:"Name",type:"text",placeholder:"Name"},null,8,["modelValue","errors"])]),n("div",X,[u(m,{id:"mobile_no",class:"mt-3",modelValue:s(i).formData.mobile_no.$model,"onUpdate:modelValue":l[1]||(l[1]=a=>s(i).formData.mobile_no.$model=a),errors:s(i).formData.mobile_no.$errors,label:"Mobile No",name:"Mobile No",type:"text",placeholder:"Mobile No"},null,8,["modelValue","errors"])]),n("div",Y,[u(m,{id:"email",class:"mt-3",modelValue:s(t).email,"onUpdate:modelValue":l[2]||(l[2]=a=>s(t).email=a),label:"Email",name:"Email",type:"text",placeholder:"Email",disabled:!0},null,8,["modelValue"])]),n("div",Z,[u(m,{id:"role",class:"mt-3",modelValue:s(t).role,"onUpdate:modelValue":l[3]||(l[3]=a=>s(t).role=a),label:"Role",name:"role",type:"text",placeholder:"Role",disabled:!0},null,8,["modelValue"])]),n("div",S,[u(m,{id:"type",class:"mt-3",modelValue:s(t).type,"onUpdate:modelValue":l[4]||(l[4]=a=>s(t).type=a),label:"type",name:"type",type:"text",placeholder:"Type",disabled:!0},null,8,["modelValue"])]),n("div",ee,[u(p,{class:"mt-6",text:"Update",frontIcon:"",onClick:l[5]||(l[5]=a=>M())})])])])}}});export{ue as default};
