import{_ as X}from"./CUT5Z0q2.js";import{_ as Z}from"./D_S4Iaa4.js";import{_ as ee}from"./0YgGQvqb.js";import{_ as te}from"./r7gvbwgk.js";import{_ as oe}from"./eZAZD6-_.js";import{n as ae,s as le,r as a,B as se,v as ne,o as S,c as re,a as n,b as u,w as R,u as o,H as A,I as j,y as ie,x as ce}from"./-26k3Kfm.js";import{_ as de}from"./C8daf2Og.js";import{u as ue}from"./DW01-4ge.js";import{u as me}from"./BRwq4HAt.js";import{u as fe}from"./Dq2eM7QD.js";import{c as pe,r as _e,u as ve}from"./Dw3NAe37.js";import"./D81Fu6OS.js";import"./lPBNpYtl.js";import"./DX7fHSrm.js";import"./DYk6i2Lg.js";const ge={class:"w-full h-full"},he={class:"box mt-5 bg-white dark:bg-gray-800"},be={class:"flex space-x-2 justify-around"},Ce=["onClick"],xe=["onClick"],ye=["onClick"],ke={class:"modal-content p-4 md:p-5"},$e={class:"col-span-2"},Pe={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},Ee=ae({__name:"index",setup(we){const r=fe(),{$toast:m}=ce(),b=ue(),q=le(),V=me(),f=a(!1),T=a(!1),B=a(null),C=a([]),N=a("Action"),D=a([{value:"all",label:"All Calls",icon:"fas fa-people-group"},{value:"your",label:"Your Calls",icon:"fas fa-user"},{value:"teams",label:"Teams Call",icon:"fas fa-user-plus"},{value:"failed",label:"Failed Call",icon:"fas fa-circle-exclamation"}]),I=a([{title:"Name",value:"name"},{title:"Type",value:"access_type"},{title:"Record",value:"record"},{title:"Calendar Platform",value:"is_type"},{title:"Date",value:"date"},{title:"Time",value:"time"},{title:"Meeting Platform",value:"platform"},{title:"Folder",value:"folder"},{title:"Action",value:"action"}]),i=a({page:1,meeting:"recorded",search:null,type:"all",action:null}),x=a({folder_id:"",meeting_id:null}),H={folder:{folder_id:{required:pe.withMessage("The Folder field is required",_e)}}},p=ve(H,{folder:x}),U=e=>{var t;x.value.meeting_id=(t=C.value[e])==null?void 0:t.id,f.value=!0},E=async()=>{await p.value.$validate()&&(r.loading=!0,b.shareMeeting(x.value).then(t=>{r.loading=!1,L(),c(),f.value=!1}))},L=()=>{x.value={folder_id:"",meeting_id:null},p.value.$reset()},O=e=>{var t;q.push(`calls/${(t=C.value[e])==null?void 0:t.id}`)},Y=e=>{var t;T.value=!0,B.value=(t=C.value[e])==null?void 0:t.id},z=e=>{T.value=!1,e&&(r.loading=!0,b.delete(B.value).then(t=>{r.loading=!1,c()}))},c=()=>{r.loading=!0,b.recordedMeeting(i.value).then(e=>{r.loading=!1}).catch(e=>{r.loading=!1,G(e)})},G=e=>{var t,y,k,$,_,P,w,M,v,g,d;if(((t=e==null?void 0:e.response)==null?void 0:t.status)==422){let s=(k=(y=e==null?void 0:e.response)==null?void 0:y.data)==null?void 0:k.data;if(s){let h=Object.keys(s)[0],F=s[h];m.error(F[0],{duration:5e3})}else(_=($=e==null?void 0:e.response)==null?void 0:$.data)!=null&&_.success?m.error("something went wrong...!",{duration:5e3}):m.error((w=(P=e==null?void 0:e.response)==null?void 0:P.data)==null?void 0:w.message,{duration:5e3})}else(v=(M=e==null?void 0:e.response)==null?void 0:M.data)!=null&&v.success?m.error("something went wrong...!",{duration:5e3}):m.error((d=(g=e==null?void 0:e.response)==null?void 0:g.data)==null?void 0:d.message,{duration:5e3})};se(()=>{c()});const J=e=>{i.value.type=e.value,c()},K=e=>{i.value.search=e,c()},Q=e=>{i.value.page=e,c()},W=e=>{e==null?(i.value.action=null,N.value="Action"):(i.value.action=e.id,N.value=e.name),c()},l=ne(()=>{let e=b.recorded;return C.value=e==null?void 0:e.data,e});return(e,t)=>{var v,g;const y=X,k=Z,$=ee,_=te,P=oe,w=ie,M=de;return S(),re("div",ge,[n("div",he,[u(y,{headings:o(I),data:(v=o(l))==null?void 0:v.data,isSearchable:!0,isActionable:!0,actions:(g=o(V))==null?void 0:g.folders,title:"Calls",onSearch:K,filterTab:o(D),actionName:o(N),onTabClick:J,onSelect:W},{action:R(({item:d,value:s,index:h})=>[n("div",be,[n("i",{onClick:F=>U(h),class:"fas fa-share-nodes cursor-pointer text-primary-400"},null,8,Ce),n("i",{onClick:F=>O(h),class:"fas fa-eye text-blue-400 cursor-pointer"},null,8,xe),n("i",{onClick:F=>Y(h),class:"fas fa-trash text-red-400 cursor-pointer"},null,8,ye)])]),_:1},8,["headings","data","actions","filterTab","actionName"]),o(l)&&o(l).total&&o(l).per_page&&o(l).total>o(l).per_page?(S(),A(k,{key:0,class:"mt-4 flex justify-end",totalRecords:o(l).total,currentPage:o(i).page,recordsPerPage:o(l).per_page,onPageChange:Q},null,8,["totalRecords","currentPage","recordsPerPage"])):j("",!0),u(P,{title:"Share Meeting",subTitle:"Share call with your team member",show:o(f),onClose:t[3]||(t[3]=d=>f.value=!1)},{default:R(()=>{var d;return[n("div",ke,[n("div",$e,[u($,{label:"Folder",placeholder:"Select Folder",id:"Folder",name:"folder",modelValue:o(p).folder.folder_id.$model,"onUpdate:modelValue":t[0]||(t[0]=s=>o(p).folder.folder_id.$model=s),errors:o(p).folder.folder_id.$errors,options:(d=o(V))==null?void 0:d.folders},null,8,["modelValue","errors","options"])])]),n("div",Pe,[u(_,{class:"mr-2",text:"Share Meeintg",frontIcon:"fas fa-share-nodes",onClick:t[1]||(t[1]=s=>E())}),u(_,{text:"Cancel",onClick:t[2]||(t[2]=s=>f.value=!1),outline:""})])]}),_:1},8,["show"]),u(w),o(T)?(S(),A(M,{key:1,onConfirmation:z})):j("",!0)])])}}});export{Ee as default};
