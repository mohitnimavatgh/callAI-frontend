import{_ as M}from"./DMpLc2Hb.js";import{_ as S}from"./DX7fHSrm.js";import{_ as R}from"./r7gvbwgk.js";import{n as U,s as j,r as D,v as I,o as L,c as F,b as m,a as d,u as s,x as O}from"./-26k3Kfm.js";import{u as z}from"./Dkzkeb-w.js";import{u as G}from"./Dq2eM7QD.js";import{c as f,r as h,s as H,u as J}from"./Dw3NAe37.js";import"./DYk6i2Lg.js";const K={class:"mt-5"},Q=d("div",null,[d("h4",{class:"text-lg font-semibold text-gray-600 dark:text-white"},"Change Password")],-1),W={class:"p-5 mt-3 lg:w-1/2 w-full bg-white dark:bg-gray-800 rounded-lg"},X={class:""},Y={class:"mt-5"},Z={class:"mt-5"},ee={class:"mt-4 flex justify-end"},ue=U({__name:"change-password",setup(se){const l=G(),g=z(),N=j(),{$toast:i}=O(),c=D({currentPassword:"",newPassword:"",confirmNewPassword:""}),V={formData:{currentPassword:{required:f.withMessage("The Current Password is required",h)},newPassword:{required:f.withMessage("The New Password is required",h)},confirmNewPassword:{required:f.withMessage("The Confirm Password is required",h),sameAs:f.withMessage("The Confirm Password must be same as New Password",H(I(()=>c.value.newPassword)))}}},a=J(V,{formData:c}),T=async()=>{if(await a.value.$validate()){l.loading=!0;let t={currentpassword:c.value.currentPassword,newpassword:c.value.newPassword};g.changePassword(t).then(n=>{l.loading=!1,b(),i.success("Password changed successfully",{duration:5e3})}).catch(n=>{l.loading=!1,P(n)})}},b=()=>{c.value={currentPassword:"",newPassword:"",confirmNewPassword:""},a.value.$reset(),l.loading=!0,g.logout().then(e=>{l.loading=!1,N.push("/login")}).catch(e=>{l.loading=!1,P(e)})},P=e=>{var t,n,u,w,r,_,y,v,C,$,x;if(((t=e==null?void 0:e.response)==null?void 0:t.status)==422){let p=(u=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:u.data;if(p){let B=Object.keys(p)[0],E=p[B];i.error(E[0],{duration:5e3})}else(r=(w=e==null?void 0:e.response)==null?void 0:w.data)!=null&&r.success?i.error("Something went wrong...!",{duration:5e3}):i.error((y=(_=e==null?void 0:e.response)==null?void 0:_.data)==null?void 0:y.message,{duration:5e3})}else(C=(v=e==null?void 0:e.response)==null?void 0:v.data)!=null&&C.success?i.error("Something went wrong...!",{duration:5e3}):i.error((x=($=e==null?void 0:e.response)==null?void 0:$.data)==null?void 0:x.message,{duration:5e3})},o=D({current:!0,new:!0,confirm:!0}),k=()=>{o.value.current=!o.value.current},q=()=>{o.value.new=!o.value.new},A=()=>{o.value.confirm=!o.value.confirm};return(e,t)=>{const n=M,u=S,w=R;return L(),F("div",K,[m(n),Q,d("div",W,[d("div",X,[m(u,{id:"current",label:"Current Password",iconPosition:"right",name:"current",type:s(o).current?"password":"text",pointer:!1,placeholder:"Enter your current password",icon:s(o).current?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.currentPassword.$model,"onUpdate:modelValue":t[0]||(t[0]=r=>s(a).formData.currentPassword.$model=r),errors:s(a).formData.currentPassword.$errors,onChangeType:k},null,8,["type","icon","modelValue","errors"])]),d("div",Y,[m(u,{id:"new",label:"New Password",name:"new",iconPosition:"right",type:s(o).new?"password":"text",pointer:!1,placeholder:"Enter your new password",icon:s(o).new?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.newPassword.$model,"onUpdate:modelValue":t[1]||(t[1]=r=>s(a).formData.newPassword.$model=r),errors:s(a).formData.newPassword.$errors,onChangeType:q},null,8,["type","icon","modelValue","errors"])]),d("div",Z,[m(u,{id:"confirm",label:"Confirm Password",name:"confirm",iconPosition:"right",type:s(o).confirm?"password":"text",pointer:!1,placeholder:"Enter your confirm password",icon:s(o).confirm?"fas fa-eye-slash":"fas fa-eye",modelValue:s(a).formData.confirmNewPassword.$model,"onUpdate:modelValue":t[2]||(t[2]=r=>s(a).formData.confirmNewPassword.$model=r),errors:s(a).formData.confirmNewPassword.$errors,onChangeType:A},null,8,["type","icon","modelValue","errors"])]),d("div",ee,[m(w,{class:"mt-6",text:"Save",frontIcon:"",onClick:T})])])])}}});export{ue as default};
