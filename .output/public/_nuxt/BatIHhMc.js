import{_ as S}from"./r7gvbwgk.js";import{_ as T}from"./DX7fHSrm.js";import{_ as j}from"./0YgGQvqb.js";import{_ as A}from"./eZAZD6-_.js";import{_ as E}from"./DMpLc2Hb.js";import{n as D,r as b,s as H,B as O,C as W,h as z,o as G,c as J,a as n,b as i,u as o,w as K,y as Q,x as X}from"./-26k3Kfm.js";import{u as Y}from"./DW01-4ge.js";import{u as Z}from"./BRwq4HAt.js";import{c as g,r as h,b as ee,u as B}from"./Dw3NAe37.js";import"./Dq2eM7QD.js";import"./DYk6i2Lg.js";const te={class:"px-4"},oe={class:"flex flex-wrap justify-between align-items-center"},se=n("div",{class:"pr-6"},[n("h4",{class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},"Confra"),n("p",{class:"mb-3 sm:mb-6 text-sm text-nowrap font-normal text-gray-500 mt-1 dark:text-gray-400"},"AI-Powered Meeting Recording Simplified")],-1),ae={class:"modal-content p-4 md:p-5"},ne={class:"col-span-2 mb-3"},le={class:"col-span-2 mb-3"},ie={class:"col-span-2"},re={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},de={class:"mt-5 mb-5"},$e=D({__name:"call-ai",setup(ce){const x=Y(),M=Z(),{$toast:d}=X(),r=b({name:"",folder_id:"",meeting_link:""}),$={bot:{name:{required:g.withMessage("The Name field is required",h)},folder_id:{required:g.withMessage("The Folder field is required",h)},meeting_link:{required:g.withMessage("The Meeting field is required",h),url:g.withMessage("Please Enter a valid Meeting URL",ee)}}},s=B($,{bot:r}),c=b(!1),R=b([{label:"Home",icon:"fas fa-home",active:!1,url:"/call-ai"},{label:"Calls",icon:"fas fa-phone",active:!1,url:"/call-ai/call"},{label:"Settings",icon:"fas fa-gear",active:!1,url:"/call-ai/settings"}]),N={page:1,meeting:"upcoming",search:null},w=H();O(async()=>{await W(),await M.list({search:""})});const k=()=>{r.value.name="",r.value.folder_id="",r.value.meeting_link="",s.value.$reset(),c.value=!1},U=()=>{const e=w.currentRoute.value.path;R.value.forEach(t=>{t.url==="/call-ai"?t.active=e==="/call-ai":t.active=e.startsWith(t.url)})};z(w.currentRoute,U);const q=async()=>{await B($,{bot:r}).value.$validate()&&x.create(r.value).then(l=>{I(),d.success("Create Bot Successfully",{duration:1e4}),x.upcomingMeeting(N),c.value=!1}).catch(l=>{F(l),c.value=!1})},F=e=>{var t,l,m,u,f,p,_,a,y,V,C;if(((t=e==null?void 0:e.response)==null?void 0:t.status)==422){let v=(m=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:m.data;if(v){let L=Object.keys(v)[0],P=v[L];d.error(P[0],{duration:5e3})}else(f=(u=e==null?void 0:e.response)==null?void 0:u.data)!=null&&f.success?d.error("something went wrong...!",{duration:5e3}):d.error((_=(p=e==null?void 0:e.response)==null?void 0:p.data)==null?void 0:_.message,{duration:5e3})}else(y=(a=e==null?void 0:e.response)==null?void 0:a.data)!=null&&y.success?d.error("something went wrong...!",{duration:5e3}):d.error((C=(V=e==null?void 0:e.response)==null?void 0:V.data)==null?void 0:C.message,{duration:5e3})},I=()=>{s.value.$reset(),r.value={name:"",folder_id:"",meeting_link:""}};return(e,t)=>{const l=S,m=T,u=j,f=A,p=E,_=Q;return G(),J("div",te,[n("div",oe,[se,i(l,{text:"Meeting Bot",frontIcon:"fas fa-video",onClick:t[0]||(t[0]=a=>c.value=!o(c)),class:"h-full"}),i(f,{title:"Meeting Bot",subTitle:"Confra will join and record the meeting",show:o(c),onClose:t[5]||(t[5]=a=>k())},{default:K(()=>[n("div",ae,[n("div",ne,[i(m,{id:"Name",label:"Meeting Name",name:"Name",type:"text",placeholder:"Name",modelValue:o(s).bot.name.$model,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).bot.name.$model=a),errors:o(s).bot.name.$errors},null,8,["modelValue","errors"])]),n("div",le,[i(u,{label:"Folder",placeholder:"Select Folder",id:"Folder",name:"folder",modelValue:o(s).bot.folder_id.$model,"onUpdate:modelValue":t[2]||(t[2]=a=>o(s).bot.folder_id.$model=a),errors:o(s).bot.folder_id.$errors,options:o(M).folders},null,8,["modelValue","errors","options"])]),n("div",ie,[i(m,{id:"Meeting URL",label:"Meeting URL",name:"Meeting URL",type:"text",placeholder:"Meeting URL",modelValue:o(s).bot.meeting_link.$model,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).bot.meeting_link.$model=a),errors:o(s).bot.meeting_link.$errors},null,8,["modelValue","errors"])])]),n("div",re,[i(l,{class:"mr-2",text:"Add Meeting",frontIcon:"fas fa-plus",onClick:q}),i(l,{text:"Cancel",onClick:t[4]||(t[4]=a=>k()),outline:""})])]),_:1},8,["show"])]),i(p),n("div",de,[i(_)])])}}});export{$e as default};
