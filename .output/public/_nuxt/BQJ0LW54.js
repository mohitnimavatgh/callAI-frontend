import{_ as Z}from"./r7gvbwgk.js";import{_ as I}from"./lPBNpYtl.js";import{_ as ee}from"./DX7fHSrm.js";import{d as te,_ as se}from"./D_S4Iaa4.js";import{_ as ae,a as oe}from"./DNl09rS6.js";import{_ as le}from"./eZAZD6-_.js";import{n as ne,r as g,v as re,B as de,C as ce,o as c,c as x,a as e,b as i,u as o,D as ie,F as U,E as q,t as B,G as ue,d as me,I as D,H as j,w as pe,x as fe}from"./-26k3Kfm.js";import{u as _e}from"./BRwq4HAt.js";import{u as ve}from"./Dq2eM7QD.js";import{c as L,r as z,u as ge}from"./Dw3NAe37.js";import"./DYk6i2Lg.js";const xe={class:"mt-5"},ye={class:"flex flex-wrap justify-between"},he=e("div",{class:"mr-3"},[e("h4",{class:"text-lg font-semibold text-gray-600 dark:text-white"},"Manage Folders"),e("p",{class:"text-xs mb-3 text-nowrap font-normal text-gray-500 mt-0.5"},"Organize and customize your folders")],-1),be={class:"mt-3 sm:flex items-center flex-wrap justify-end"},we={class:"flex sm:w-fit w-full justify-end"},ke={class:"mt-5 flex flex-wrap items-center bg-white dark:bg-gray-800 p-5 py-5 rounded-[20px]"},$e={class:"flex justify-between border border-gray-100 px-3 py-2 rounded-lg items-center dark:border-none"},Fe={class:"flex items-center"},Ce=e("div",{class:"bg-primary-50 dark:bg-gray-800 w-12 h-12 rounded-md"},[e("div",{class:"flex w-full h-full items-center text-center justify-center"},[e("i",{class:"fas fa-folder-open text-md text-primary-400 dark:text-primary-500"})])],-1),Ve={class:"ml-3 p-5"},Te={class:"text-xs font-semibold text-gray-500"},Ae={class:"text-xs text-gray-400"},Pe={class:"flex items-center"},Me=["onMouseleave"],Ne=["onMouseover","onClick"],je={key:0,class:"absolute z-10 bg-white divide-y divide-gray-100 rounded-lg shadow w-20 dark:bg-gray-700 dark:divide-gray-600"},Re={class:"py-1 text-sm text-gray-700 dark:text-gray-200"},Se=["onClick"],Ue=e("i",{class:"fas fa-pen text-gray-400 mr-2"},null,-1),qe={key:1,class:"w-full"},Be=e("div",{class:"mx-auto text-xl w-full py-16 lg:py-20 px-8 flex flex-col items-center justify-center border border-gray-100 text-gray-500 rounded-lg"},[e("div",{class:"flex items-center justify-center w-16 h-16 rounded-full border border-gray-300"},[e("i",{class:"fa fa-folder-open"})]),e("div",{class:"mt-3"}," No folders found. ")],-1),De=[Be],Le={class:"flex justify-center"},ze={class:"modal-content p-4 md:p-5"},Ee={class:"col-span-2 mb-3"},Oe=e("label",{class:"text-sm font-medium text-gray-500"},"Folder Access",-1),Ge={class:"w-full"},He={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},ot=ne({__name:"folders",setup(Je){const _=g(!1),r=ve(),A=g(!1),{$toast:u}=fe(),w=_e(),k=g(""),P=g("Filter"),m=g({page:1,search:"",action:null}),E=[{value:"private",icon:"fas fa-lock",labelText:"Private Access",description:"Restrict visibility to admins only, hiding it from team members."},{value:"public",icon:"fas fa-user-group",labelText:"Team Access",description:"Grant team members access, making the folder visible to all."}],O=[{value:"",name:"select Filter"},{value:"no_of_meeting",name:"Number of meetings"},{value:"public",name:"Team Access"},{value:"private",name:"Private Access"},{value:"last_updated",name:"Last Updated"},{value:"alpha_order",name:"Alphabatical Order"}],d=re(()=>w.folderPagination),p=g({name:"",access_type:"private"}),G={folder:{name:{required:L.withMessage("The Name field is required",z)},access_type:{required:L.withMessage("The Folder Access field is required",z)}}},n=ge(G,{folder:p}),v=()=>{r.loading=!0,w.list(m.value).then(t=>{r.loading=!1}).catch(t=>{r.loading=!1,M(t)})};de(async()=>{await ce(),await v()});async function H(){await n.value.$validate()&&(r.loading=!0,w.create(p.value).then(a=>{u.success("Folder Create Successfully",{duration:1e4}),r.loading=!1,_.value=!1,S(),v()}).catch(a=>{r.loading=!1,M(a)}))}const J=async()=>{await n.value.$validate()&&(r.loading=!0,w.update(p.value).then(a=>{_.value=!1,r.loading=!1,A.value=!1,u.success("Folder Updated Successfully",{duration:1e4}),v()}).catch(a=>{r.loading=!1,M(a)}))},M=t=>{var a,f,$,y,F,C,V,T,h,b,s;if(((a=t==null?void 0:t.response)==null?void 0:a.status)==422){let l=($=(f=t==null?void 0:t.response)==null?void 0:f.data)==null?void 0:$.data;if(l){let N=Object.keys(l)[0],Y=l[N];u.error(Y[0],{duration:5e3})}else(F=(y=t==null?void 0:t.response)==null?void 0:y.data)!=null&&F.success?u.error("something went wrong...!",{duration:5e3}):u.error((V=(C=t==null?void 0:t.response)==null?void 0:C.data)==null?void 0:V.message,{duration:5e3})}else(h=(T=t==null?void 0:t.response)==null?void 0:T.data)!=null&&h.success?u.error("something went wrong...!",{duration:5e3}):u.error((s=(b=t==null?void 0:t.response)==null?void 0:b.data)==null?void 0:s.message,{duration:5e3})},R=()=>{S(),n.value.$reset(),_.value=!1},S=()=>{p.value={name:"",access_type:"private"},n.value.$reset()},K=te(()=>{m.value.page=1,m.value.search=k.value,v()},700),Q=t=>{m.value.page=t,v()},W=t=>{t==null?(m.value.action=null,P.value="Action"):(m.value.action=t.value,P.value=t.name),v()},X=t=>{A.value=!0,p.value.name=t.name,p.value.access_type=t.access_type,p.value.id=t.id,_.value=!0};return(t,a)=>{var h,b;const f=Z,$=I,y=ee,F=se,C=ae,V=oe,T=le;return c(),x("div",xe,[e("div",ye,[he,e("div",null,[i(f,{onClick:a[0]||(a[0]=s=>_.value=!0),frontIcon:"fas fa-plus",text:"Folder"})])]),e("div",be,[e("div",we,[i($,{class:"mb-2 sm:mb-0 sm:mr-2",buttonText:o(P),actions:O,onSelect:W},null,8,["buttonText"])]),i(y,{type:"text",icon:"fas fa-search",placeholder:"Search Folders",modelValue:o(k),"onUpdate:modelValue":a[1]||(a[1]=s=>ie(k)?k.value=s:null),onInput:o(K),class:"sm:w-56 w-full"},null,8,["modelValue","onInput"])]),e("div",ke,[(h=o(d))!=null&&h.data.length?(c(!0),x(U,{key:0},q((b=o(d))==null?void 0:b.data,s=>(c(),x("div",{key:s,class:"relative px-2 py-3 w-full sm:w-6/12 lg:w-4/12 xl:w-3/12 bg-white dark:bg-gray-700"},[e("div",$e,[e("div",Fe,[Ce,e("div",Ve,[e("p",Te,B(s.name),1),e("p",Ae,"Meetings: "+B(s.meeting_count),1)])]),e("div",Pe,[e("i",{class:ue(["text-xs text-gray-300 mr-2",`fas ${s.access_type=="public"?"fa-user-group":"fa-lock"}`])},null,2),e("div",{onMouseleave:l=>s.active=!1,class:"cursor-pointer"},[e("i",{class:"fas fa-ellipsis text-gray-300",onMouseover:l=>s.active=!0,onClick:l=>s.active=!0},null,40,Ne),s.active?(c(),x("div",je,[e("ul",Re,[e("li",null,[e("a",{onClick:l=>X(s),class:"text-gray-400 text-xs block px-2 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},[Ue,me("Edit")],8,Se)])])])):D("",!0)],40,Me)])])]))),128)):(c(),x("div",qe,De))]),e("div",Le,[o(d)&&o(d).total&&o(d).per_page&&o(d).total>o(d).per_page?(c(),j(F,{key:0,class:"mt-4 flex justify-end",totalRecords:o(d).total,currentPage:o(m).page,recordsPerPage:o(d).per_page,onPageChange:Q},null,8,["totalRecords","currentPage","recordsPerPage"])):D("",!0)]),i(T,{title:"Add Folder",show:o(_),onClose:a[5]||(a[5]=s=>R())},{default:pe(()=>[e("div",ze,[e("div",Ee,[i(y,{id:"Name",label:"Folder Name",name:"Folder Name",type:"text",placeholder:"Add Folder Name",rules:"required",modelValue:o(n).folder.name.$model,"onUpdate:modelValue":a[2]||(a[2]=s=>o(n).folder.name.$model=s),errors:o(n).folder.name.$errors},null,8,["modelValue","errors"])]),e("div",null,[Oe,e("ul",Ge,[(c(),x(U,null,q(E,(s,l)=>e("li",{key:l,class:"mt-2"},[i(C,{id:`radio-${l}`,name:"access",value:s.value,modelValue:o(n).folder.access_type.$model,"onUpdate:modelValue":a[3]||(a[3]=N=>o(n).folder.access_type.$model=N),errors:o(n).folder.access_type.$errors},null,8,["id","value","modelValue","errors"]),i(V,{icon:s.icon,id:`radio-${l}`,labelText:s.labelText,description:s.description},null,8,["icon","id","labelText","description"])])),64))])])]),e("div",He,[o(A)?(c(),j(f,{key:1,class:"mr-2",text:"Update Folder",onClick:J,frontIcon:"fas fa-plus"})):(c(),j(f,{key:0,class:"mr-2",text:"Add Folder",onClick:H,frontIcon:"fas fa-plus"})),i(f,{text:"Cancel",onClick:a[4]||(a[4]=s=>R()),outline:""})])]),_:1},8,["show"])])}}});export{ot as default};
