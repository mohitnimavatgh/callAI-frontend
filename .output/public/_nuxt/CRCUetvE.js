import{_ as T}from"./DuJwqhlO.js";import{_ as U}from"./DX7fHSrm.js";import{_ as M}from"./r7gvbwgk.js";import{n as j,A as R,s as F,r as $,v as E,B as I,C as O,o as S,c as Y,a as u,b as i,u as n,x as z}from"./-26k3Kfm.js";import D from"./BY7vU7ge.js";import{u as G}from"./Dkzkeb-w.js";import{c as p,r as k,m as H,a as J,s as K,u as Q}from"./Dw3NAe37.js";import"./Dl47B6FV.js";import"./DYk6i2Lg.js";const W={class:"flex flex-col h-full pt-20 flowbit-lg:pt-0"},X={class:"dark:bg-gray-900 h-full self-center w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-8"},Z=u("h3",{class:"text-md font-semibold text-gray-600 mb-4 mt-6 text-center"},"Update Your Password",-1),ss=u("span",{class:"text-sm text-gray-500 mt-3 px-4 md:px-4 flex justify-center text-center"},"No worries, we will mail you a 6-digit code to your recovery email address to reset your password.",-1),es={class:"mt-6"},os={class:"h-fit"},ps=j({__name:"update-password",setup(ts){var _;const V=G(),{$toast:a}=z(),w=R(),f=F(),b=$((_=w.query)==null?void 0:_.token),d=$({password:null,confirmPassword:null}),q={reset:{password:{required:p.withMessage("The Password field is required",k),minLength:H(6),maxLength:J(8)},confirmPassword:{required:p.withMessage("The Confirm password field is required.",k),sameAs:p.withMessage("The Confirm password must be same as password.",K(E(()=>d.value.password)))}}},t=Q(q,{reset:d});I(async()=>{var s;await O(),(s=w.query)!=null&&s.token||(a.error("something went wrong...!",{duration:5e3}),f.push("/login"))});const A=()=>{d.value.password=null,d.value.confirmPassword=null,t.value.$reset()},C=async()=>{if(await t.value.$validate()){let e={rest_token:b.value,newpassword:d.value.password};V.forgotPassword(e).then(o=>{o.success?(t.value.$reset(),a.success("Password Updated Successfully",{duration:1e4}),f.push("/login")):a.error(o==null?void 0:o.message,{duration:5e3})}).catch(o=>{B(o),A()})}},B=s=>{var e,o,l,m,r,g,h,x,P,y,v;if(((e=s==null?void 0:s.response)==null?void 0:e.status)==422){let c=(l=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:l.data;if(c){let L=Object.keys(c)[0],N=c[L];a.error(N[0],{duration:5e3})}else(r=(m=s==null?void 0:s.response)==null?void 0:m.data)!=null&&r.success?a.error("something went wrong...!",{duration:5e3}):a.error((h=(g=s==null?void 0:s.response)==null?void 0:g.data)==null?void 0:h.message,{duration:5e3})}else(P=(x=s==null?void 0:s.response)==null?void 0:x.data)!=null&&P.success?a.error("something went wrong...!",{duration:5e3}):a.error((v=(y=s==null?void 0:s.response)==null?void 0:y.data)==null?void 0:v.message,{duration:5e3})};return(s,e)=>{const o=T,l=U,m=M;return S(),Y("div",W,[u("section",X,[i(o,{class:"justify-center mb-6"}),Z,ss,u("div",es,[i(l,{id:"Password",label:"Password",modelValue:n(t).reset.password.$model,"onUpdate:modelValue":e[0]||(e[0]=r=>n(t).reset.password.$model=r),errors:n(t).reset.password.$errors,name:"Password",type:"password",placeholder:"New Password"},null,8,["modelValue","errors"]),i(l,{id:"confirmPassword",label:"Confirm Password",modelValue:n(t).reset.confirmPassword.$model,"onUpdate:modelValue":e[1]||(e[1]=r=>n(t).reset.confirmPassword.$model=r),errors:n(t).reset.confirmPassword.$errors,name:"confirmPassword",type:"password",placeholder:"Confirm Password",class:"mt-3"},null,8,["modelValue","errors"]),i(m,{text:"Update Password",class:"mt-3",onClick:e[2]||(e[2]=r=>C())})])]),u("div",os,[i(n(D))])])}}});export{ps as default};
